<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 æ—¥æœ¬æ»‘é›ªè¡Œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #FBFBFB; --card-bg: #FFFFFF; --text-main: #2D2D2D; --text-sub: #8C8C8C;
            --accent-ski: #5B7065; --accent-food: #D4A373; --border-color: #EFEFEF;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Noto Sans TC', sans-serif; background-color: var(--bg-color);
            color: var(--text-main); margin: 0; padding: 20px 16px 100px 16px;
        }

        /* æ§åˆ¶é é¢åˆ‡æ› */
        .page { display: none; }
        .page.active { display: block; }

        header { margin-bottom: 25px; border-left: 4px solid var(--accent-ski); padding-left: 15px; }
        h1 { font-size: 24px; margin: 0; }
        .current-time { font-size: 12px; color: var(--text-sub); }

        /* ä½å®¿è³‡è¨Šæ»¾å‹• */
        .stay-section { display: flex; overflow-x: auto; gap: 12px; margin-bottom: 25px; padding-bottom: 10px; }
        .stay-card { min-width: 240px; background: #fff; padding: 15px; border-radius: 16px; border: 1px solid var(--border-color); }
        .stay-date { color: var(--accent-ski); font-weight: bold; font-size: 11px; }

        /* é€šç”¨å¡ç‰‡ */
        .section-title { font-size: 13px; font-weight: 700; color: var(--text-sub); margin: 25px 0 10px 5px; display: flex; justify-content: space-between; }
        .card { background: var(--card-bg); border-radius: 18px; padding: 18px; margin-bottom: 12px; border: 1px solid var(--border-color); }
        .nav-btn { display: flex; width: 100%; height: 40px; background: #F8F8F8; border-radius: 10px; align-items: center; justify-content: center; text-decoration: none; color: var(--text-main); font-size: 13px; border: 1px solid #EDEDED; gap: 6px; }

        /* è¨˜å¸³æ¨£å¼ */
        .budget-summary { background: #5B7065; color: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; }
        .total-amount { font-size: 28px; font-weight: 700; }
        .input-group { background: white; border-radius: 15px; padding: 15px; border: 1px solid var(--border-color); margin-bottom: 15px; }
        .input-row { display: flex; gap: 8px; margin-bottom: 8px; }
        input, select { border: 1px solid #DDD; border-radius: 8px; padding: 10px; font-size: 14px; flex: 1; width: 100%; }
        .add-btn { background: var(--accent-ski); color: white; border: none; padding: 10px; border-radius: 8px; width: 100%; font-weight: bold; }
        .expense-item { border-bottom: 1px solid var(--border-color); padding: 10px 0; display: flex; justify-content: space-between; }

        /* åº•éƒ¨å°èˆª */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0; height: 70px;
            background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color); display: flex; z-index: 1000;
        }
        .nav-btn-item { flex: 1; border: none; background: none; color: var(--text-sub); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .nav-btn-item.active { color: var(--accent-ski); font-weight: bold; }
        .nav-icon { font-size: 20px; margin-bottom: 2px; }
    </style>
</head>
<body>

    <header>
        <h1 id="header-title">2026 æ—¥æœ¬æ»‘é›ªè¡Œ</h1>
        <div class="current-time" id="clock">Loading...</div>
    </header>

    <main id="page-itinerary" class="page active">
        <div class="stay-section">
            <div class="stay-card">
                <span class="stay-date">FEB 21 - FEB 23</span><br>
                <b>ä¸Šé‡é£¯åº—</b>
            </div>
            <div class="stay-card">
                <span class="stay-date">FEB 23 - FEB 26</span><br>
                <b>çŸ³æ‰“ä¸¸å±± 190-1 Ishiuchi</b>
                <a href="https://www.google.com/maps/search/?api=1&query=36.9157,138.8256" class="nav-btn" style="margin-top:5px; height:30px;">å°èˆª</a>
            </div>
            <div class="stay-card">
                <span class="stay-date">FEB 26 - FEB 28</span><br>
                <b>è‘›é£¾å€ 1-2-9 Tateishi</b>
                <a href="https://www.google.com/maps/search/?api=1&query=Tokyo+Katsushika+Tateishi+1-2-9" class="nav-btn" style="margin-top:5px; height:30px;">å°èˆª</a>
            </div>
        </div>

        <div class="section-title">DAY 1 Â· FEB 21</div>
        <div class="card">
            <div class="location-name">æ¡ƒæ©Ÿ â” æˆç”°æ©Ÿå ´</div>
            <p class="description">02:25 èµ·é£› / 06:30 æŠµé”</p>
            <a href="https://www.google.com/maps/search/?api=1&query=Narita+Airport" class="nav-btn">ğŸ§­ å°èˆªè‡³æ©Ÿå ´</a>
        </div>

        <div class="section-title">DAY 2 Â· FEB 22</div>
        <div class="card">
            <div class="location-name">ã‚ˆã‚ã«ã (Yoroniku)</div>
            <p class="description">19:30 é ç´„ã€‚å¿…é»ï¼šçµ²æ»‘ç‰›èƒŒè‚‰ã€‚</p>
            <a href="https://www.google.com/maps/search/?api=1&query=Yoroniku+Ebisu" class="nav-btn">ğŸ´ é¤å»³å°èˆª</a>
        </div>
        
        <p style="text-align:center; color:#CCC; font-size:12px;">æ›´å¤šè¡Œç¨‹æŒçºŒè¼‰å…¥ä¸­...</p>
    </main>

    <main id="page-budget" class="page">
        <div class="budget-summary">
            <span style="font-size:12px; opacity:0.8;">ç¸½æ”¯å‡ºä¼°ç®— (TWD)</span>
            <div class="total-amount" id="total-twd">NT$ 0</div>
        </div>

        <div class="input-group">
            <div class="input-row">
                <input type="text" id="exp-name" placeholder="é …ç›®å…§å®¹">
                <select id="exp-cat">
                    <option value="ğŸ½ï¸ ç¾é£Ÿ">ç¾é£Ÿ</option>
                    <option value="ğŸš„ äº¤é€š">äº¤é€š</option>
                    <option value="ğŸ‚ æ»‘é›ª">æ»‘é›ª</option>
                    <option value="ğŸ›ï¸ è³¼ç‰©">è³¼ç‰©</option>
                </select>
            </div>
            <div class="input-row">
                <input type="number" id="exp-jpy" placeholder="é‡‘é¡ (JPY)">
            </div>
            <button class="add-btn" onclick="addExpense()">æ–°å¢ç´€éŒ„</button>
        </div>

        <div id="expense-list"></div>
        <button onclick="clearExpenses()" style="width:100%; border:none; background:none; color:red; font-size:11px; margin-top:20px; opacity:0.5;">æ¸…ç©ºæ­·å²ç´€éŒ„</button>
    </main>

    <nav class="bottom-nav">
        <button onclick="switchTab('itinerary', this)" class="nav-btn-item active">
            <span class="nav-icon">ğŸ—“ï¸</span>è¡Œç¨‹
        </button>
        <button onclick="switchTab('budget', this)" class="nav-btn-item">
            <span class="nav-icon">ğŸ’°</span>è¨˜å¸³
        </button>
    </nav>

    <script>
        // 1. é é¢åˆ‡æ›é‚è¼¯
        function switchTab(tabName, element) {
            // éš±è—æ‰€æœ‰é é¢
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            // å–æ¶ˆæ‰€æœ‰å°èˆªæŒ‰éˆ•çš„ active
            document.querySelectorAll('.nav-btn-item').forEach(btn => btn.classList.remove('active'));
            
            // é¡¯ç¤ºç•¶å‰é é¢
            document.getElementById('page-' + tabName).classList.add('active');
            // è¨­å®šæŒ‰éˆ• active
            element.classList.add('active');
            
            // æ›´æ–°æ¨™é¡Œ
            document.getElementById('header-title').innerText = (tabName === 'budget') ? 'é ç®—è¨˜å¸³' : '2026 æ—¥æœ¬æ»‘é›ªè¡Œ';
            
            // è‡ªå‹•æ»¾å‹•åˆ°é ‚éƒ¨
            window.scrollTo(0, 0);
        }

        // 2. è¨˜å¸³é‚è¼¯
        const JPY_RATE = 0.21;
